<div class="container mt-4">
  <!-- 上層Card -->
  <div class="card">
    <div class="card-body">
       <!-- 表單 -->
      <form (ngSubmit)="onSubmit()" ngNativeValidate>
        <div class="row gy-3">
          <!-- 氣象開放資料平台會員授權碼 -->
          <div class="col-md-12">
            <label for="authorization" class="form-label">氣象開放資料平台會員授權碼</label>
            <input type="text" id="authorization" class="form-control" name="authorization" placeholder="請輸入平台會員授權碼" [(ngModel)]="authorization" required>
          </div>

          <!-- 地區選擇 -->
          <div class="col-md-5">
            <label for="region" class="form-label">地區選擇</label>
            <select id="region" class="form-select" name="region" [(ngModel)]="selectedRegion">
              <option value="" selected>全選</option>
              <option *ngFor="let region of regions" [value]="region">{{ region }}</option>
            </select>
          </div>

          <!-- 天氣因子 -->
          <div class="col-md-5">
            <label for="factor" class="form-label">天氣因子</label>
            <select id="factor" class="form-select" name="factor" [(ngModel)]="selectedFactor">
              <option value="" selected>全選</option>
              <option *ngFor="let factor of factors" [value]="factor">{{ factor }}</option>
            </select>
          </div>

          <!-- 送出按鈕 -->
          <div class="col-md-2 d-flex align-items-end">
            <button type="submit" class="btn btn-primary w-100">送出</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- 下方 Card：表格資料 -->
  <div *ngIf="data.length" class="card mt-4">
    <div class="card-body">
      <h5 class="card-title">查詢結果</h5>
      <table class="table table-bordered table-striped mb-0">
        <thead>
          <tr>
            <th scope="col">地區</th>
            <th scope="col">開始時間</th>
            <th scope="col">結束時間</th>
            <th scope="col">天氣因子名稱</th>
            <th scope="col">數值</th>
            <th scope="col">單位</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of data">
            <td>{{ item.locationName }}</td>
            <td>{{ item.startTime }}</td>
            <td>{{ item.endTime }}</td>
            <td>{{ item.parameterName }}</td>
            <td>{{ item.parameterValue }}</td>
            <td>{{ item.parameterUnit }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
